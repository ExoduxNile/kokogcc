<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kokoro TTS Service</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(to bottom, #f0f4f8, #d9e2ec);
            min-height: 100vh;
        }
    </style>
</head>
<body class="font-sans text-gray-800">
    <div class="container mx-auto px-4 py-12">
        <!-- Header -->
        <header class="text-center mb-12">
            <h1 class="text-4xl font-bold mb-4">Kokoro TTS Service</h1>
            <p class="text-xl text-gray-600">Transform text into natural-sounding speech with our advanced text-to-speech technology</p>
        </header>

        <!-- Main Content -->
        <main class="max-w-4xl mx-auto">
            <section class="bg-white rounded-lg shadow-lg p-8 mb-8">
                <h2 class="text-2xl font-semibold mb-6">API Documentation</h2>
                <div class="space-y-6">
                    <div>
                        <h3 class="text-lg font-medium">POST /api/tts</h3>
                        <p class="text-gray-600">Convert text to speech and return audio file</p>
                        <div class="mt-4">
                            <h4 class="font-medium">Request Body (JSON)</h4>
                            <pre class="bg-gray-100 p-4 rounded mt-2 overflow-x-auto">
{
    "text": "string",           // Required: Text to convert
    "voice": "string",          // Optional: Voice name or blend (e.g., "af_sarah" or "af_sarah:60,am_adam:40")
    "speed": number,            // Optional: Speech speed (default: 1.0)
    "lang": "string",           // Optional: Language code (default: "en-us")
    "format": "string"          // Optional: Output format ("wav" or "mp3", default: "wav")
}
                            </pre>
                        </div>
                        <div class="mt-4">
                            <h4 class="font-medium">Responses</h4>
                            <ul class="list-disc pl-5 text-gray-600">
                                <li><strong>200 OK</strong>: Returns audio file</li>
                                <li><strong>400 Bad Request</strong>: Invalid input parameters</li>
                                <li><strong>500 Internal Server Error</strong>: Server-side error</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <section class="bg-white rounded-lg shadow-lg p-8">
                <h2 class="text-2xl font-semibold mb-6">Try It Out</h2>
                <form id="tts-form" class="space-y-4">
                    <div>
                        <label for="text" class="block text-sm font-medium text-gray-700">Text to Convert</label>
                        <textarea id="text" name="text" rows="4" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50" required></textarea>
                    </div>
                    <div>
                        <label for="voice" class="block text-sm font-medium text-gray-700">Voice</label>
                        <select id="voice" name="voice" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                            <option value="af_sarah">Sarah (African)</option>
                            <option value="am_adam">Adam (American)</option>
                            <!-- Add more voices as available -->
                        </select>
                    </div>
                    <div>
                        <label for="speed" class="block text-sm font-medium text-gray-700">Speed</label>
                        <input type="number" id="speed" name="speed" step="0.1" min="0.5" max="2.0" value="1.0" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                    </div>
                    <div>
                        <label for="lang" class="block text-sm font-medium text-gray-700">Language</label>
                        <select id="lang" name="lang" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                            <option value="en-us">English (US)</option>
                            <!-- Add more languages as available -->
                        </select>
                    </div>
                    <div>
                        <label for="format" class="block text-sm font-medium text-gray-700">Format</label>
                        <select id="format" name="format" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                            <option value="wav">WAV</option>
                            <option value="mp3">MP3</option>
                        </select>
                    </div>
                    <button type="submit" class="w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">Convert to Speech</button>
                </form>
                <div id="result" class="mt-4 hidden">
                    <h3 class="text-lg font-medium">Result</h3>
                    <audio id="audio-player" controls class="w-full mt-2"></audio>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="text-center mt-12 text-gray-600">
            <p>Powered by Kokoro TTS &copy; 2025</p>
        </footer>
    </div>

    <script>
        document.getElementById('tts-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(e.target);
            const data = {
                text: formData.get('text'),
                voice: formData.get('voice'),
                speed: parseFloat(formData.get('speed')),
                lang: formData.get('lang'),
                format: formData.get('format')
            };

            try {
                const response = await fetch('/api/tts', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                if (!response.ok) {
                    throw new Error(await response.text());
                }

                const blob = await response.blob();
                const url = window.URL.createObjectURL(blob);
                const audioPlayer = document.getElementById('audio-player');
                audioPlayer.src = url;
                document.getElementById('result').classList.remove('hidden');
            } catch (error) {
                alert('Error: ' + error.message);
            }
        });
    </script>
</body>
</html>
